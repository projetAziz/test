(self.webpackChunkreact_test=self.webpackChunkreact_test||[]).push([[968],{9122:function(e,t,n){"use strict";function r(){return(null===n.g||void 0===n.g?void 0:n.g.crypto)||(null===n.g||void 0===n.g?void 0:n.g.msCrypto)||{}}function i(){var e=r();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=r,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=function(){return!!r()&&!!i()}},54683:function(e,t,n){"use strict";var r=n(1426);function i(){return"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product}function s(){return"undefined"!==typeof r&&"undefined"!==typeof r.versions&&"undefined"!==typeof r.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=i,t.isNode=s,t.isBrowser=function(){return!i()&&!s()}},67323:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9122),t),i(n(54683),t)},21143:function(e){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},29808:function(e,t){"use strict";function n(e){var t=void 0;return"undefined"!==typeof window&&"undefined"!==typeof window[e]&&(t=window[e]),t}function r(e){var t=n(e);if(!t)throw new Error("".concat(e," is not defined in Window"));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=n,t.getFromWindowOrThrow=r,t.getDocumentOrThrow=function(){return r("document")},t.getDocument=function(){return n("document")},t.getNavigatorOrThrow=function(){return r("navigator")},t.getNavigator=function(){return n("navigator")},t.getLocationOrThrow=function(){return r("location")},t.getLocation=function(){return n("location")},t.getCryptoOrThrow=function(){return r("crypto")},t.getCrypto=function(){return n("crypto")},t.getLocalStorageOrThrow=function(){return r("localStorage")},t.getLocalStorage=function(){return n("localStorage")}},37296:function(e,t,n){"use strict";t.D=void 0;var r=n(29808);t.D=function(){var e,t;try{e=r.getDocumentOrThrow(),t=r.getLocationOrThrow()}catch(s){return null}function n(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=e.getElementsByTagName("meta"),s=function(e){var t=i[e],r=["itemprop","property","name"].map((function(e){return t.getAttribute(e)})).filter((function(e){return!!e&&n.includes(e)}));if(r.length&&r){var s=t.getAttribute("content");if(s)return{v:s}}},o=0;o<i.length;o++){var a=s(o);if("object"===typeof a)return a.v}return""}var i=function(){var t=n("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:n("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){for(var n=e.getElementsByTagName("link"),r=[],i=0;i<n.length;i++){var s=n[i],o=s.getAttribute("rel");if(o&&o.toLowerCase().indexOf("icon")>-1){var a=s.getAttribute("href");if(a)if(-1===a.toLowerCase().indexOf("https:")&&-1===a.toLowerCase().indexOf("http:")&&0!==a.indexOf("//")){var c=t.protocol+"//"+t.host;if(0===a.indexOf("/"))c+=a;else{var u=t.pathname.split("/");u.pop(),c+=u.join("/")+"/"+a}r.push(c)}else if(0===a.indexOf("//")){var h=t.protocol+a;r.push(h)}else r.push(a)}}return r}(),name:i}}},82873:function(e,t,n){"use strict";n.d(t,{d:function(){return f}});var r=n(15861),i=n(15671),s=n(43144),o=n(97326),a=n(60136),c=n(43668),u=n(87757),h=n.n(u),d=n(4942),p=n(95437),f=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this),(0,d.Z)((0,o.Z)(r),"clientId",void 0),r.clientId=e.clientId,r}return(0,s.Z)(n,[{key:"authenticateUser",value:function(){var e=(0,r.Z)(h().mark((function e(){var t,n,r,i,s,o,a,c,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider&&null!==(t=this.chainConfig)&&void 0!==t&&t.chainId){e.next=2;break}throw p.RM.notConnectedError();case 2:if(n=this.chainConfig,r=n.chainNamespace,i=n.chainId,this.status===p.MP.CONNECTED){e.next=5;break}throw p.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"eth_accounts"});case 7:if(!((s=e.sent)&&s.length>0)){e.next=26;break}if(!(o=(0,p.Cb)(s[0],this.name))){e.next=14;break}if((0,p.$E)(o)){e.next=14;break}return e.abrupt("return",{idToken:o});case 14:return a={domain:window.location.origin,uri:window.location.href,address:s[0],chainId:parseInt(i,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},e.next=17,(0,p.tV)(a,r);case 17:return c=e.sent,e.next=20,this.provider.request({method:"personal_sign",params:[c,s[0]]});case 20:return u=e.sent,e.next=23,(0,p.rn)(r,u,c,this.name,this.sessionTime,this.clientId);case 23:return d=e.sent,(0,p.Fr)(s[0],this.name,d),e.abrupt("return",{idToken:d});case 26:throw p.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,r.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===p.MP.CONNECTED){e.next=2;break}throw p.RM.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"eth_accounts"});case 4:(t=e.sent)&&t.length>0&&(0,p.qz)(t[0],this.name);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(p.J5)},47968:function(e,t,n){"use strict";n.r(t),n.d(t,{WalletConnectV1Adapter:function(){return At}});var r={};n.r(r),n.d(r,{decrypt:function(){return Ot},encrypt:function(){return xt},generateKey:function(){return mt},verifyHmac:function(){return bt}});var i=n(15861),s=n(15671),o=n(43144),a=n(97326),c=n(11752),u=n(61120),h=n(60136),d=n(43668),p=n(87757),f=n.n(p),l=n(4942),v=n(93433),g=n(37296),y=n(29808),w=n(1426),k=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},m=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},_=function(e){this.version=e,this.type="node",this.name="node",this.os=w.platform},b=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},S=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},x=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},I=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,O=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],E=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function C(e){return e?M(e):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new x:"undefined"!==typeof navigator?M(navigator.userAgent):"undefined"!==typeof w&&w.version?new _(w.version.slice(1)):null}function R(e){return""!==e&&O.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var s=i.exec(e);return!!s&&[r,s]}),!1)}function M(e){var t=R(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new S;var i=r[1]&&r[1].split(/[._]/).slice(0,3);i?i.length<3&&(i=k(i,function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-i.length))):i=[];var s=i.join("."),o=function(e){for(var t=0,n=E.length;t<n;t++){var r=E[t],i=r[0];if(r[1].exec(e))return i}return null}(e),a=I.exec(e);return a&&a[1]?new b(n,s,o,a[1]):new m(n,s,o)}function T(e){return C(e)}function N(){var e=T();return e&&e.os?e.os:void 0}function Z(){return!!N()&&(function(){var e=N();return!!e&&e.toLowerCase().includes("android")}()||function(){var e=N();return!!e&&(e.toLowerCase().includes("ios")||e.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1)}())}function A(){return!function(){var e=T();return!(!e||!e.name)&&"node"===e.name.toLowerCase()}()&&!!P()}y.getFromWindow,y.getFromWindowOrThrow,y.getDocumentOrThrow,y.getDocument,y.getNavigatorOrThrow;var P=y.getNavigator,q=(y.getLocationOrThrow,y.getLocation),j=(y.getCryptoOrThrow,y.getCrypto,y.getLocalStorageOrThrow,y.getLocalStorage);function W(){return g.D()}var L=function(e){if("string"!==typeof e)throw new Error("Cannot safe json parse value of type ".concat(typeof e));try{return JSON.parse(e)}catch(t){return e}},D=function(e){return"string"===typeof e?e:JSON.stringify(e)};function U(e){var t=null,n=j();return n&&(t=n.getItem(e)),t?L(t):t}function F(e){var t=j();t&&t.removeItem(e)}var B="WALLETCONNECT_DEEPLINK_CHOICE";var J=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],$=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],V=n(80518),K=n.n(V),Y=(n(75520),n(16758)),Q=n.n(Y),H=n(19778).Buffer,G="hex",X="utf8",z="0";function ee(e){return new Uint8Array(e)}function te(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.toString(G);return t?ge(n):n}function ne(e){return e.toString(X)}function re(e){return Q()(e)}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return te(re(e),t)}function se(e){return ne(re(e))}function oe(e){return H.from(ve(e),G)}function ae(e){return ee(oe(e))}function ce(e){return H.from(e,X)}function ue(e){return ee(ce(e))}function he(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}function de(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e=e.concat(Array.from(t))})),new Uint8Array((0,v.Z)(e))}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=e%t;return n?(e-n)/t*t+t:e}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z;return le(e,pe(e.length,t),n)}function le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z;return we(e,t,!0,n)}function ve(e){return e.replace(/^0x/,"")}function ge(e){return e.startsWith("0x")?e:"0x".concat(e)}function ye(e){return(e=fe(e=ve(e),2))&&(e=ge(e)),e}function we(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:z,i=t-e.length,s=e;if(i>0){var o=r.repeat(i);s=n?o+e:e+o}return s}function ke(e){return re(new Uint8Array(e))}function me(e){return ee(e).buffer}function _e(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return te(ce(e),t)}(e,!t)}function be(e,t){var n=ve(ye(new(K())(e).toString(16)));return t?n:ge(n)}var Se,xe=n(27898),Ie="SERVER_ERROR";Se={},(0,l.Z)(Se,"PARSE_ERROR",{code:-32700,message:"Parse error"}),(0,l.Z)(Se,"INVALID_REQUEST",{code:-32600,message:"Invalid Request"}),(0,l.Z)(Se,"METHOD_NOT_FOUND",{code:-32601,message:"Method not found"}),(0,l.Z)(Se,"INVALID_PARAMS",{code:-32602,message:"Invalid params"}),(0,l.Z)(Se,"INTERNAL_ERROR",{code:-32603,message:"Internal error"}),(0,l.Z)(Se,Ie,{code:-32e3,message:"Server error"});var Oe=n(67323);function Ee(){return Date.now()*Math.pow(10,3)+Math.floor(Math.random()*Math.pow(10,3))}function Ce(e){return ye(e)}function Re(e){return function(e){var t=e.startsWith("0x");return e=(e=ve(e)).startsWith(z)?e.substring(1):e,t?ge(e):e}(ge(e))}var Me=Ee;function Te(){return function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}()}function Ne(e,t){return he(e,t)}function Ze(e){return"undefined"!==typeof e.result}function Ae(e){return"undefined"!==typeof e.error}function Pe(e){return"undefined"!==typeof e.event}function qe(e){return!!e.method.startsWith("wc_")||!$.includes(e.method)}function je(e){e=ve(e.toLowerCase());for(var t=ve((0,xe.keccak_256)(ce(e))),n="",r=0;r<e.length;r++)parseInt(t[r],16)>7?n+=e[r].toUpperCase():n+=e[r];return ge(n)}function We(e){var t;return(t=e)&&t.length&&!Ne(e[0])&&(e[0]=_e(e[0])),e}function Le(e){if("undefined"!==typeof e.type&&"0"!==e.type)return e;if("undefined"===typeof e.from||(!(t=e.from)||"0x"!==t.toLowerCase().substring(0,2)||!/^(0x)?[0-9a-f]{40}$/i.test(t)||!/^(0x)?[0-9a-f]{40}$/.test(t)&&!/^(0x)?[0-9A-F]{40}$/.test(t)&&t!==je(t)))throw new Error("Transaction object must include a valid 'from' value.");var t;function n(e){var t=e;return("number"===typeof e||"string"===typeof e&&!function(e){return""===e||"string"===typeof e&&""===e.trim()}(e))&&(Ne(e)?"string"===typeof e&&(t=Ce(e)):t=be(e)),"string"===typeof t&&(t=Re(t)),t}var r={from:Ce(e.from),to:"undefined"===typeof e.to?void 0:Ce(e.to),gasPrice:"undefined"===typeof e.gasPrice?"":n(e.gasPrice),gas:"undefined"===typeof e.gas?"undefined"===typeof e.gasLimit?"":n(e.gasLimit):n(e.gas),value:"undefined"===typeof e.value?"":n(e.value),nonce:"undefined"===typeof e.nonce?"":n(e.nonce),data:"undefined"===typeof e.data?"":Ce(e.data)||"0x"},i=["gasPrice","gas","value","nonce"];return Object.keys(r).forEach((function(e){("undefined"===typeof r[e]||"string"===typeof r[e]&&!r[e].trim().length)&&i.includes(e)&&delete r[e]})),r}var De=n(4245);function Ue(e,t){var n=Fe(e);return e=function(e){return De.stringify(e)}(n=Object.assign(Object.assign({},n),t))}function Fe(e){return De.parse(e)}var Be=function(){function e(){var t=this;(0,s.Z)(this,e),this._eventEmitters=[],"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&(window.addEventListener("online",(function(){return t.trigger("online")})),window.addEventListener("offline",(function(){return t.trigger("offline")})))}return(0,o.Z)(e,[{key:"on",value:function(e,t){this._eventEmitters.push({event:e,callback:t})}},{key:"trigger",value:function(e){var t=[];e&&(t=this._eventEmitters.filter((function(t){return t.event===e}))),t.forEach((function(e){e.callback()}))}}]),e}(),Je="undefined"!==typeof n.g.WebSocket?n.g.WebSocket:n(21143),$e=function(){function e(t){var n=this;if((0,s.Z)(this,e),this.opts=t,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=t.protocol,this._version=t.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=t.subscriptions||[],this._netMonitor=t.netMonitor||new Be,!t.url||"string"!==typeof t.url)throw new Error("Missing or invalid WebSocket url");this._url=t.url,this._netMonitor.on("online",(function(){return n._socketCreate()}))}return(0,o.Z)(e,[{key:"readyState",get:function(){return this._socket?this._socket.readyState:-1},set:function(e){}},{key:"connecting",get:function(){return 0===this.readyState},set:function(e){}},{key:"connected",get:function(){return 1===this.readyState},set:function(e){}},{key:"closing",get:function(){return 2===this.readyState},set:function(e){}},{key:"closed",get:function(){return 3===this.readyState},set:function(e){}},{key:"open",value:function(){this._socketCreate()}},{key:"close",value:function(){this._socketClose()}},{key:"send",value:function(e,t,n){if(!t||"string"!==typeof t)throw new Error("Missing or invalid topic field");this._socketSend({topic:t,type:"pub",payload:e,silent:!!n})}},{key:"subscribe",value:function(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}},{key:"on",value:function(e,t){this._events.push({event:e,callback:t})}},{key:"_socketCreate",value:function(){var e=this;if(!this._nextSocket){var t=function(e,t,n){var r,i,s=(e.startsWith("https")?e.replace("https","wss"):e.startsWith("http")?e.replace("http","ws"):e).split("?"),o=A()?{protocol:t,version:n,env:"browser",host:(null===(r=q())||void 0===r?void 0:r.host)||""}:{protocol:t,version:n,env:(null===(i=T())||void 0===i?void 0:i.name)||""},a=Ue(function(e){var t=-1!==e.indexOf("?")?e.indexOf("?"):void 0;return"undefined"!==typeof t?e.substr(t):""}(s[1]||""),o);return s[0]+"?"+a}(this._url,this._protocol,this._version);if(this._nextSocket=new Je(t),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=function(t){return e._socketReceive(t)},this._nextSocket.onopen=function(){return e._socketOpen()},this._nextSocket.onerror=function(t){return e._socketError(t)},this._nextSocket.onclose=function(){setTimeout((function(){e._nextSocket=null,e._socketCreate()}),1e3)}}}},{key:"_socketOpen",value:function(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}},{key:"_socketClose",value:function(){this._socket&&(this._socket.onclose=function(){},this._socket.close())}},{key:"_socketSend",value:function(e){var t=JSON.stringify(e);this._socket&&1===this._socket.readyState?this._socket.send(t):(this._setToQueue(e),this._socketCreate())}},{key:"_socketReceive",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=JSON.parse(t.data),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return");case 7:this._socketSend({topic:n.topic,type:"ack",payload:"",silent:!0}),this._socket&&1===this._socket.readyState&&(r=this._events.filter((function(e){return"message"===e.event})),r&&r.length&&r.forEach((function(e){return e.callback(n)})));case 9:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_socketError",value:function(e){var t=this._events.filter((function(e){return"error"===e.event}));t&&t.length&&t.forEach((function(t){return t.callback(e)}))}},{key:"_queueSubscriptions",value:function(){var e=this;this._subscriptions.forEach((function(t){return e._queue.push({topic:t,type:"sub",payload:"",silent:!0})})),this._subscriptions=this.opts.subscriptions||[]}},{key:"_setToQueue",value:function(e){this._queue.push(e)}},{key:"_pushQueue",value:function(){var e=this;this._queue.forEach((function(t){return e._socketSend(t)})),this._queue=[]}}]),e}();var Ve=$e,Ke="Session currently connected",Ye="Session currently disconnected",Qe="JSON RPC response format is invalid",He="User close QRCode Modal",Ge=function(){function e(){(0,s.Z)(this,e),this._eventEmitters=[]}return(0,o.Z)(e,[{key:"subscribe",value:function(e){this._eventEmitters.push(e)}},{key:"unsubscribe",value:function(e){this._eventEmitters=this._eventEmitters.filter((function(t){return t.event!==e}))}},{key:"trigger",value:function(e){var t,n=[];(t="undefined"!==typeof e.method?e.method:Ze(e)||Ae(e)?"response:".concat(e.id):Pe(e)?e.event:"")&&(n=this._eventEmitters.filter((function(e){return e.event===t}))),n&&n.length||function(e){return J.includes(e)||e.startsWith("wc_")}(t)||Pe(t)||(n=this._eventEmitters.filter((function(e){return"call_request"===e.event}))),n.forEach((function(t){if(Ae(e)){var n=new Error(e.error.message);t.callback(n,null)}else t.callback(null,e)}))}}]),e}(),Xe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"walletconnect";(0,s.Z)(this,e),this.storageId=t}return(0,o.Z)(e,[{key:"getSession",value:function(){var e=null,t=U(this.storageId);return t&&"undefined"!==typeof t.bridge&&(e=t),e}},{key:"setSession",value:function(e){return function(e,t){var n=D(t),r=j();r&&r.setItem(e,n)}(this.storageId,e),e}},{key:"removeSession",value:function(){F(this.storageId)}}]),e}(),ze=Xe,et="abcdefghijklmnopqrstuvwxyz0123456789".split("").map((function(e){return"https://".concat(e,".bridge.walletconnect.org")}));function tt(){return et[Math.floor(Math.random()*et.length)]}var nt=function(){function e(t){if((0,s.Z)(this,e),this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new Ge,this._clientMeta=W()||t.connectorOpts.clientMeta||null,this._cryptoLib=t.cryptoLib,this._sessionStorage=t.sessionStorage||new ze(t.connectorOpts.storageId),this._qrcodeModal=t.connectorOpts.qrcodeModal,this._qrcodeModalOptions=t.connectorOpts.qrcodeModalOptions,this._signingMethods=[].concat((0,v.Z)($),(0,v.Z)(t.connectorOpts.signingMethods||[])),!t.connectorOpts.bridge&&!t.connectorOpts.uri&&!t.connectorOpts.session)throw new Error("Missing one of the required parameters: bridge / uri / session");var n;t.connectorOpts.bridge&&(this.bridge=function(e){return"walletconnect.org"===function(e){return function(e){var t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0];return(t=t.split(":")[0]).split("?")[0]}(e).split(".").slice(-2).join(".")}(e)}(n=t.connectorOpts.bridge)?tt():n),t.connectorOpts.uri&&(this.uri=t.connectorOpts.uri);var r=t.connectorOpts.session||this._getStorageSession();r&&(this.session=r),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=t.transport||new Ve({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),t.connectorOpts.uri&&this._subscribeToSessionRequest(),t.pushServerOpts&&this._registerPushServer(t.pushServerOpts)}return(0,o.Z)(e,[{key:"bridge",get:function(){return this._bridge},set:function(e){e&&(this._bridge=e)}},{key:"key",get:function(){var e,t;return this._key?(e=this._key,t=!0,ie(new Uint8Array(e),!t)):""},set:function(e){if(e){var t=ae(e).buffer;this._key=t}}},{key:"clientId",get:function(){var e=this._clientId;return e||(e=this._clientId=Te()),this._clientId},set:function(e){e&&(this._clientId=e)}},{key:"peerId",get:function(){return this._peerId},set:function(e){e&&(this._peerId=e)}},{key:"clientMeta",get:function(){var e=this._clientMeta;return e||(e=this._clientMeta=W()),e},set:function(e){}},{key:"peerMeta",get:function(){return this._peerMeta},set:function(e){this._peerMeta=e}},{key:"handshakeTopic",get:function(){return this._handshakeTopic},set:function(e){e&&(this._handshakeTopic=e)}},{key:"handshakeId",get:function(){return this._handshakeId},set:function(e){e&&(this._handshakeId=e)}},{key:"uri",get:function(){return this._formatUri()},set:function(e){if(e){var t=this._parseUri(e),n=t.handshakeTopic,r=t.bridge,i=t.key;this.handshakeTopic=n,this.bridge=r,this.key=i}}},{key:"chainId",get:function(){return this._chainId},set:function(e){this._chainId=e}},{key:"networkId",get:function(){return this._networkId},set:function(e){this._networkId=e}},{key:"accounts",get:function(){return this._accounts},set:function(e){this._accounts=e}},{key:"rpcUrl",get:function(){return this._rpcUrl},set:function(e){this._rpcUrl=e}},{key:"connected",get:function(){return this._connected},set:function(e){}},{key:"pending",get:function(){return!!this._handshakeTopic},set:function(e){}},{key:"session",get:function(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}},set:function(e){e&&(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}},{key:"on",value:function(e,t){var n={event:e,callback:t};this._eventManager.subscribe(n)}},{key:"off",value:function(e){this._eventManager.unsubscribe(e)}},{key:"createInstantRequest",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r,i,s=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._generateKey();case 2:return this._key=e.sent,n=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(t)}]}),this.handshakeId=n.id,this.handshakeTopic=Te(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",(function(){throw new Error(He)})),r=function(){s.killSession()},e.prev=9,e.next=12,this._sendCallRequest(n);case 12:return(i=e.sent)&&r(),e.abrupt("return",i);case 17:throw e.prev=17,e.t0=e.catch(9),r(),e.t0;case 21:case"end":return e.stop()}}),e,this,[[9,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._qrcodeModal){e.next=2;break}throw new Error("QRCode Modal not provided");case 2:if(!this.connected){e.next=4;break}return e.abrupt("return",{chainId:this.chainId,accounts:this.accounts});case 4:return e.next=6,this.createSession(t);case 6:return e.abrupt("return",new Promise(function(){var e=(0,i.Z)(f().mark((function e(t,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.on("modal_closed",(function(){return r(new Error(He))})),n.on("connect",(function(e,n){if(e)return r(e);t(n.params[0])}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSession",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connected){e.next=2;break}throw new Error(Ke);case 2:if(!this.pending){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this._generateKey();case 6:this._key=e.sent,n=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:t&&t.chainId?t.chainId:null}]}),this.handshakeId=n.id,this.handshakeTopic=Te(),this._sendSessionRequest(n,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"approveSession",value:function(e){if(this._connected)throw new Error(Ke);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";var t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},n={id:this.handshakeId,jsonrpc:"2.0",result:t};this._sendResponse(n),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}},{key:"rejectSession",value:function(e){if(this._connected)throw new Error(Ke);var t=e&&e.message?e.message:"Session Rejected",n=this._formatResponse({id:this.handshakeId,error:{message:t}});this._sendResponse(n),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession()}},{key:"updateSession",value:function(e){if(!this._connected)throw new Error(Ye);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";var t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},n=this._formatRequest({method:"wc_sessionUpdate",params:[t]});this._sendSessionRequest(n,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}},{key:"killSession",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?t.message:"Session Disconnected",r={approved:!1,chainId:null,networkId:null,accounts:null},i=this._formatRequest({method:"wc_sessionUpdate",params:[r]}),e.next=5,this._sendRequest(i);case 5:this._handleSessionDisconnect(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(Ye);case 2:return n=Le(t),r=this._formatRequest({method:"eth_sendTransaction",params:[n]}),e.next=6,this._sendCallRequest(r);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(Ye);case 2:return n=Le(t),r=this._formatRequest({method:"eth_signTransaction",params:[n]}),e.next=6,this._sendCallRequest(r);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(Ye);case 2:return n=this._formatRequest({method:"eth_sign",params:t}),e.next=5,this._sendCallRequest(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signPersonalMessage",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(Ye);case 2:return t=We(t),n=this._formatRequest({method:"personal_sign",params:t}),e.next=6,this._sendCallRequest(n);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTypedData",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(Ye);case 2:return n=this._formatRequest({method:"eth_signTypedData",params:t}),e.next=5,this._sendCallRequest(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateChain",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error("Session currently disconnected");case 2:return n=this._formatRequest({method:"wallet_updateChain",params:[t]}),e.next=5,this._sendCallRequest(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsafeSend",value:function(e,t){var n=this;return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),new Promise((function(t,r){n._subscribeToResponse(e.id,(function(e,n){if(e)r(e);else{if(!n)throw new Error("Missing JSON RPC response");t(n)}}))}))}},{key:"sendCustomRequest",value:function(){var e=(0,i.Z)(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new Error(Ye);case 2:e.t0=t.method,e.next="eth_accounts"===e.t0?5:"eth_chainId"===e.t0?6:"eth_sendTransaction"===e.t0||"eth_signTransaction"===e.t0?7:"personal_sign"===e.t0?9:11;break;case 5:return e.abrupt("return",this.accounts);case 6:return e.abrupt("return",be(this.chainId));case 7:return t.params&&(t.params[0]=Le(t.params[0])),e.abrupt("break",12);case 9:return t.params&&(t.params=We(t.params)),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:return r=this._formatRequest(t),e.next=15,this._sendCallRequest(r,n);case 15:return i=e.sent,e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"approveRequest",value:function(e){if(!Ze(e))throw new Error('JSON-RPC success response must include "result" field');var t=this._formatResponse(e);this._sendResponse(t)}},{key:"rejectRequest",value:function(e){if(!Ae(e))throw new Error('JSON-RPC error response must include "error" field');var t=this._formatResponse(e);this._sendResponse(t)}},{key:"transportClose",value:function(){this._transport.close()}},{key:"_sendRequest",value:function(){var e=(0,i.Z)(f().mark((function e(t,n){var r,i,s,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._formatRequest(t),e.next=3,this._encrypt(r);case 3:i=e.sent,s="undefined"!==typeof(null===n||void 0===n?void 0:n.topic)?n.topic:this.peerId,o=JSON.stringify(i),a="undefined"!==typeof(null===n||void 0===n?void 0:n.forcePushNotification)?!n.forcePushNotification:qe(r),this._transport.send(o,s,a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_sendResponse",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._encrypt(t);case 2:n=e.sent,r=this.peerId,i=JSON.stringify(n),!0,this._transport.send(i,r,true);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_sendSessionRequest",value:function(){var e=(0,i.Z)(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._sendRequest(t,r),this._subscribeToSessionResponse(t.id,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_sendCallRequest",value:function(e,t){return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),this._subscribeToCallResponse(e.id)}},{key:"_formatRequest",value:function(e){if("undefined"===typeof e.method)throw new Error('JSON RPC request must have valid "method" value');return{id:"undefined"===typeof e.id?Me():e.id,jsonrpc:"2.0",method:e.method,params:"undefined"===typeof e.params?[]:e.params}}},{key:"_formatResponse",value:function(e){if("undefined"===typeof e.id)throw new Error('JSON RPC request must have valid "id" value');var t={id:e.id,jsonrpc:"2.0"};if(Ae(e)){var n=function(e){var t=e.message||"Failed or Rejected Request",n=-32e3;if(e&&!e.code)switch(t){case"Parse error":n=-32700;break;case"Invalid request":n=-32600;break;case"Method not found":n=-32601;break;case"Invalid params":n=-32602;break;case"Internal error":n=-32603;break;default:n=-32e3}var r={code:n,message:t};return e.data&&(r.data=e.data),r}(e.error);return Object.assign(Object.assign(Object.assign({},t),e),{error:n})}if(Ze(e))return Object.assign(Object.assign({},t),e);throw new Error(Qe)}},{key:"_handleSessionDisconnect",value:function(e){var t=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),F(B)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession(),this.transportClose()}},{key:"_handleSessionResponse",value:function(e,t){t&&t.approved?(this._connected?(t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),t.peerId&&!this.peerId&&(this.peerId=t.peerId),t.peerMeta&&!this.peerMeta&&(this.peerMeta=t.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e)}},{key:"_handleIncomingMessages",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if([this.clientId,this.handshakeTopic].includes(t.topic)){e.next=3;break}return e.abrupt("return");case 3:e.prev=3,n=JSON.parse(t.payload),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return");case 10:return e.next=12,this._decrypt(n);case 12:(r=e.sent)&&this._eventManager.trigger(r);case 14:case"end":return e.stop()}}),e,this,[[3,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribeToSessionRequest",value:function(){this._transport.subscribe(this.handshakeTopic)}},{key:"_subscribeToResponse",value:function(e,t){this.on("response:".concat(e),t)}},{key:"_subscribeToSessionResponse",value:function(e,t){var n=this;this._subscribeToResponse(e,(function(e,r){e?n._handleSessionResponse(e.message):Ze(r)?n._handleSessionResponse(t,r.result):r.error&&r.error.message?n._handleSessionResponse(r.error.message):n._handleSessionResponse(t)}))}},{key:"_subscribeToCallResponse",value:function(e){var t=this;return new Promise((function(n,r){t._subscribeToResponse(e,(function(e,t){e?r(e):Ze(t)?n(t.result):t.error&&t.error.message?r(t.error):r(new Error(Qe))}))}))}},{key:"_subscribeToInternalEvents",value:function(){var e=this;this.on("display_uri",(function(){e._qrcodeModal&&e._qrcodeModal.open(e.uri,(function(){e._eventManager.trigger({event:"modal_closed",params:[]})}),e._qrcodeModalOptions)})),this.on("connect",(function(){e._qrcodeModal&&e._qrcodeModal.close()})),this.on("call_request_sent",(function(t,n){var r=n.params[0].request;if(Z()&&e._signingMethods.includes(r.method)){var i=U(B);i&&(window.location.href=i.href)}})),this.on("wc_sessionRequest",(function(t,n){t&&e._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:t.toString()}]}),e.handshakeId=n.id,e.peerId=n.params[0].peerId,e.peerMeta=n.params[0].peerMeta;var r=Object.assign(Object.assign({},n),{method:"session_request"});e._eventManager.trigger(r)})),this.on("wc_sessionUpdate",(function(t,n){t&&e._handleSessionResponse(t.message),e._handleSessionResponse("Session disconnected",n.params[0])}))}},{key:"_initTransport",value:function(){var e=this;this._transport.on("message",(function(t){return e._handleIncomingMessages(t)})),this._transport.on("open",(function(){return e._eventManager.trigger({event:"transport_open",params:[]})})),this._transport.on("close",(function(){return e._eventManager.trigger({event:"transport_close",params:[]})})),this._transport.on("error",(function(){return e._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})})),this._transport.open()}},{key:"_formatUri",value:function(){var e=this.protocol,t=this.handshakeTopic,n=this.version,r=encodeURIComponent(this.bridge),i=this.key;return"".concat(e,":").concat(t,"@").concat(n,"?bridge=").concat(r,"&key=").concat(i)}},{key:"_parseUri",value:function(e){var t=function(e){var t=e.indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,r=e.substring(0,t),i=function(e){var t=e.split("@");return{handshakeTopic:t[0],version:parseInt(t[1],10)}}(e.substring(t+1,n)),s=function(e){var t=Fe(e);return{key:t.key||"",bridge:t.bridge||""}}("undefined"!==typeof n?e.substr(n):"");return Object.assign(Object.assign({protocol:r},i),s)}(e);if(t.protocol===this.protocol){if(!t.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");var n=t.handshakeTopic;if(!t.bridge)throw Error("Invalid or missing bridge url parameter value");var r=decodeURIComponent(t.bridge);if(!t.key)throw Error("Invalid or missing key parameter value");return{handshakeTopic:n,bridge:r,key:t.key}}throw new Error("URI format is invalid")}},{key:"_generateKey",value:function(){var e=(0,i.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cryptoLib){e.next=5;break}return e.next=3,this._cryptoLib.generateKey();case 3:return t=e.sent,e.abrupt("return",t);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_encrypt",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._key,!this._cryptoLib||!n){e.next=6;break}return e.next=4,this._cryptoLib.encrypt(t,n);case 4:return r=e.sent,e.abrupt("return",r);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_decrypt",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._key,!this._cryptoLib||!n){e.next=6;break}return e.next=4,this._cryptoLib.decrypt(t,n);case 4:return r=e.sent,e.abrupt("return",r);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getStorageSession",value:function(){var e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}},{key:"_setStorageSession",value:function(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}},{key:"_removeStorageSession",value:function(){this._sessionStorage&&this._sessionStorage.removeSession()}},{key:"_manageStorageSession",value:function(){this._connected?this._setStorageSession():this._removeStorageSession()}},{key:"_registerPushServer",value:function(e){if(!e.url||"string"!==typeof e.url)throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||"string"!==typeof e.type)throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||"string"!==typeof e.token)throw Error("Invalid or missing pushServerOpts.token parameter value");var t={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",function(){var n=(0,i.Z)(f().mark((function n(r,i){var s,o;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r){n.next=2;break}throw r;case 2:return e.peerMeta&&(s=i.params[0].peerMeta.name,t.peerName=s),n.prev=3,n.next=6,fetch("".concat(e.url,"/new"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 6:return o=n.sent,n.next=9,o.json();case 9:if(n.sent.success){n.next=12;break}throw Error("Failed to register in Push Server");case 12:n.next=17;break;case 14:throw n.prev=14,n.t0=n.catch(3),Error("Failed to register in Push Server");case 17:case"end":return n.stop()}}),n,null,[[3,14]])})));return function(e,t){return n.apply(this,arguments)}}())}}]),e}(),rt=nt;function it(e){return Oe.getBrowerCrypto().getRandomValues(new Uint8Array(e))}var st="AES-CBC",ot="SHA-".concat(256),at="HMAC";"aes-".concat(256,"-cbc"),"sha".concat(256);function ct(e){return e===st?{length:256,name:st}:{hash:{name:ot},name:at}}function ut(e){return e===st?["encrypt","decrypt"]:["sign","verify"]}function ht(e){return dt.apply(this,arguments)}function dt(){return dt=(0,i.Z)(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:st,e.abrupt("return",Oe.getSubtleCrypto().importKey("raw",t,ct(n),!0,ut(n)));case 2:case"end":return e.stop()}}),e)}))),dt.apply(this,arguments)}function pt(){return(pt=(0,i.Z)(f().mark((function e(t,n,r){var i,s,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Oe.getSubtleCrypto(),e.next=3,ht(n,st);case 3:return s=e.sent,e.next=6,i.encrypt({iv:t,name:st},s,r);case 6:return o=e.sent,e.abrupt("return",new Uint8Array(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(){return(ft=(0,i.Z)(f().mark((function e(t,n,r){var i,s,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Oe.getSubtleCrypto(),e.next=3,ht(n,st);case 3:return s=e.sent,e.next=6,i.decrypt({iv:t,name:st},s,r);case 6:return o=e.sent,e.abrupt("return",new Uint8Array(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=(0,i.Z)(f().mark((function e(t,n){var r,i,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oe.getSubtleCrypto(),e.next=3,ht(t,at);case 3:return i=e.sent,e.next=6,r.sign({length:256,name:at},i,n);case 6:return s=e.sent,e.abrupt("return",new Uint8Array(s));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(e,t,n){return function(e,t,n){return pt.apply(this,arguments)}(e,t,n)}function yt(e,t,n){return function(e,t,n){return ft.apply(this,arguments)}(e,t,n)}function wt(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,i.Z)(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){return _t.apply(this,arguments)}function _t(){return(_t=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=it((t||256)/8),r=me(re(n)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){return St.apply(this,arguments)}function St(){return(St=(0,i.Z)(f().mark((function e(t,n){var r,i,s,o,a,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t.data),i=ae(t.iv),s=ae(t.hmac),o=ie(s,!1),a=de(r,i),e.next=7,wt(n,a);case 7:if(c=e.sent,u=ie(c,!1),ve(o)!==ve(u)){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e,t,n){return It.apply(this,arguments)}function It(){return(It=(0,i.Z)(f().mark((function e(t,n,r){var i,s,o,a,c,u,h,d,p,l,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ee(ke(n)),e.t0=r,e.t0){e.next=6;break}return e.next=5,mt(128);case 5:e.t0=e.sent;case 6:return s=e.t0,o=ee(ke(s)),a=ie(o,!1),c=JSON.stringify(t),u=ue(c),e.next=13,gt(o,i,u);case 13:return h=e.sent,d=ie(h,!1),p=de(h,o),e.next=18,wt(i,p);case 18:return l=e.sent,v=ie(l,!1),e.abrupt("return",{data:d,hmac:v,iv:a});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t){return Et.apply(this,arguments)}function Et(){return(Et=(0,i.Z)(f().mark((function e(t,n){var r,i,s,o,a,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ee(ke(n))){e.next=3;break}throw new Error("Missing key: required for decryption");case 3:return e.next=5,bt(t,r);case 5:if(e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return i=ae(t.data),s=ae(t.iv),e.next=12,yt(s,r,i);case 12:o=e.sent,a=se(o),e.prev=14,c=JSON.parse(a),e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(14),e.abrupt("return",null);case 21:return e.abrupt("return",c);case 22:case"end":return e.stop()}}),e,null,[[14,18]])})))).apply(this,arguments)}var Ct=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){return(0,s.Z)(this,n),t.call(this,{cryptoLib:r,connectorOpts:e,pushServerOpts:i})}return(0,o.Z)(n)}(rt),Rt=n(95437),Mt=n(82873),Tt=n(19256),Nt=[{name:"Rainbow",chains:[Rt.EN.EIP155],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[Rt.EN.EIP155],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var At=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,s.Z)(this,n),r=t.call(this,e),(0,l.Z)((0,a.Z)(r),"name",Rt.rW.WALLET_CONNECT_V1),(0,l.Z)((0,a.Z)(r),"adapterNamespace",Rt.yk.EIP155),(0,l.Z)((0,a.Z)(r),"currentChainNamespace",Rt.EN.EIP155),(0,l.Z)((0,a.Z)(r),"type",Rt.hN.EXTERNAL),(0,l.Z)((0,a.Z)(r),"adapterOptions",void 0),(0,l.Z)((0,a.Z)(r),"status",Rt.MP.NOT_READY),(0,l.Z)((0,a.Z)(r),"adapterData",{uri:"",extensionAdapters:Nt}),(0,l.Z)((0,a.Z)(r),"connector",null),(0,l.Z)((0,a.Z)(r),"wcProvider",null),(0,l.Z)((0,a.Z)(r),"rehydrated",!1),r.adapterOptions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r.chainConfig=e.chainConfig||null,r.sessionTime=e.sessionTime||86400,r}return(0,o.Z)(n,[{key:"connected",get:function(){var e;return!(null===(e=this.connector)||void 0===e||!e.connected)}},{key:"provider",get:function(){var e;return(null===(e=this.wcProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"init",value:function(){var e=(0,i.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.Z)((0,u.Z)(n.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=(0,Rt.h2)(Rt.EN.EIP155,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new Tt.WalletConnectProvider({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(Rt.n2.READY,Rt.rW.WALLET_CONNECT_V1),this.status=Rt.MP.READY,Rt.cM.debug("initializing wallet connect v1 adapter"),!this.connector.connected){e.next=11;break}return this.rehydrated=!0,e.next=11,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,i.Z)(f().mark((function e(){var t,r,s=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.Z)((0,u.Z)(n.prototype),"checkConnectionRequirements",this).call(this),this.connector){e.next=3;break}throw Rt.Ty.notReady("Wallet adapter is not ready yet");case 3:if(!this.connected){e.next=7;break}return e.next=6,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 6:return e.abrupt("return",this.provider);case 7:if(this.status===Rt.MP.CONNECTING){e.next=13;break}return null!==(t=this.adapterOptions.adapterSettings)&&void 0!==t&&t.qrcodeModal&&(this.connector=this.getWalletConnectInstance(),this.wcProvider=new Tt.WalletConnectProvider({config:{chainConfig:this.chainConfig,skipLookupNetwork:null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.skipNetworkSwitching},connector:this.connector})),e.next=11,this.createNewSession();case 11:this.status=Rt.MP.CONNECTING,this.emit(Rt.n2.CONNECTING,{adapter:Rt.rW.WALLET_CONNECT_V1});case 13:return e.abrupt("return",new Promise((function(e,t){if(!s.connector)return t(Rt.Ty.notReady("Wallet adapter is not ready yet"));s.connector.on("modal_closed",(0,i.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.status=Rt.MP.READY,s.emit(Rt.n2.READY,Rt.rW.WALLET_CONNECT_V1),e.abrupt("return",t(new Error("User closed modal")));case 3:case"end":return e.stop()}}),e)}))));try{s.connector.on("connect",function(){var t=(0,i.Z)(f().mark((function t(n,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n&&s.emit(Rt.n2.ERRORED,n),Rt.cM.debug("connected event emitted by web3auth"),t.next=4,s.onConnectHandler(r.params[0]);case 4:return t.abrupt("return",e(s.provider));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}catch(n){Rt.cM.error("Wallet connect v1 adapter error while connecting",n),s.status=Rt.MP.READY,s.rehydrated=!0,s.emit(Rt.n2.ERRORED,n),t(n instanceof Rt.up?n:Rt.RM.connectionError("Failed to login with wallet connect: ".concat((null===n||void 0===n?void 0:n.message)||"")))}})));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAdapterSettings",value:function(e){this.status!==Rt.MP.READY&&(null!==e&&void 0!==e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!==e&&void 0!==e&&e.clientId&&(this.clientId=e.clientId))}},{key:"getUserInfo",value:function(){var e=(0,i.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connected){e.next=2;break}throw Rt.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,i.Z)(f().mark((function e(){var t,r,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{cleanup:!1},r=t.cleanup,this.connector&&this.connected){e.next=4;break}throw Rt.RM.notConnectedError("Not connected with wallet");case 4:return e.next=6,(0,c.Z)((0,u.Z)(n.prototype),"disconnect",this).call(this);case 6:return e.next=8,this.connector.killSession();case 8:this.rehydrated=!1,r?(this.connector=null,this.status=Rt.MP.NOT_READY,this.wcProvider=null):this.status=Rt.MP.READY,this.emit(Rt.n2.DISCONNECTED);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addChain",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.wcProvider){e.next=3;break}throw Rt.Ty.notReady("Wallet adapter is not ready yet");case 3:if(!(r=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.networkSwitchModal)){e.next=7;break}return e.next=7,r.addNetwork({chainConfig:t,appOrigin:window.location.hostname});case 7:return e.next=9,this.wcProvider.addChain(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Rt.cM.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,i.Z)(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.wcProvider){e.next=2;break}throw Rt.Ty.notReady("Wallet adapter is not ready yet");case 2:if(!(i=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.networkSwitchModal)){e.next=6;break}return e.next=6,i.switchNetwork({currentChainConfig:n,newChainConfig:t,appOrigin:window.location.hostname});case 6:return e.next=8,this.wcProvider.switchChain({chainId:n.chainId,lookup:!1,addChain:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createNewSession",value:function(){var e=(0,i.Z)(f().mark((function e(){var t,n,r,s,o=this,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>0&&void 0!==a[0]?a[0]:{forceNewSession:!1},this.connector){e.next=3;break}throw Rt.Ty.notReady("Wallet adapter is not ready yet");case 3:if(!r.forceNewSession||!this.connector.pending){e.next=6;break}return e.next=6,this.connector.killSession();case 6:if(null===(t=this.adapterOptions)||void 0===t||null===(n=t.adapterSettings)||void 0===n||!n.qrcodeModal){e.next=10;break}return e.next=9,this.connector.createSession({chainId:parseInt((null===(s=this.chainConfig)||void 0===s?void 0:s.chainId)||"0x1",16)});case 9:return e.abrupt("return");case 10:return e.abrupt("return",new Promise((function(e,t){var n;if(!o.connector)return t(Rt.Ty.notReady("Wallet adapter is not ready yet"));Rt.cM.debug("creating new session for web3auth wallet connect"),o.connector.on("display_uri",function(){var n=(0,i.Z)(f().mark((function n(r,i){var s,a;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r){n.next=3;break}return o.emit(Rt.n2.ERRORED,Rt.RM.connectionError("Failed to display wallet connect qr code")),n.abrupt("return",t(r));case 3:return a=i.params[0],o.updateAdapterData({uri:a,extensionAdapters:Nt}),null===(s=o.connector)||void 0===s||s.off("display_uri"),n.abrupt("return",e());case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),o.connector.createSession({chainId:parseInt((null===(n=o.chainConfig)||void 0===n?void 0:n.chainId)||"0x1",16)}).catch((function(e){return Rt.cM.error("error while creating new wallet connect session",e),o.emit(Rt.n2.ERRORED,e),t(e)}))})));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onConnectHandler",value:function(){var e=(0,i.Z)(f().mark((function e(t){var n,r,i,s,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector&&this.wcProvider){e.next=2;break}throw Rt.Ty.notReady("Wallet adapter is not ready yet");case 2:if(this.chainConfig){e.next=4;break}throw Rt.Ty.invalidParams("Chain config is not set");case 4:if(n=t.chainId,Rt.cM.debug("connected chainId in hex"),n===parseInt(this.chainConfig.chainId,16)){e.next=27;break}if(o=(0,Rt.h2)(Rt.EN.EIP155,n)||{chainId:"0x".concat(n.toString(16)),displayName:"Unknown Network"},(a=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.qrcodeModal)&&(!a||null!==(i=this.adapterOptions)&&void 0!==i&&null!==(s=i.adapterSettings)&&void 0!==s&&s.skipNetworkSwitching)){e.next=27;break}return e.prev=10,e.next=13,this.addChain(this.chainConfig);case 13:return e.next=15,this.switchChain(o,this.chainConfig);case 15:this.connector=this.getWalletConnectInstance(),e.next=27;break;case 18:return e.prev=18,e.t0=e.catch(10),Rt.cM.error("error while chain switching",e.t0),e.next=23,this.createNewSession({forceNewSession:!0});case 23:return this.emit(Rt.n2.ERRORED,Rt.Ty.fromCode(5e3,"Not connected to correct network. Expected: ".concat(this.chainConfig.displayName,", Current: ").concat((null===o||void 0===o?void 0:o.displayName)||n,", Please switch to correct network from wallet"))),this.status=Rt.MP.READY,this.rehydrated=!0,e.abrupt("return");case 27:return e.next=29,this.wcProvider.setupProvider(this.connector);case 29:this.subscribeEvents(this.connector),this.status=Rt.MP.CONNECTED,this.emit(Rt.n2.CONNECTED,{adapter:Rt.rW.WALLET_CONNECT_V1,reconnected:this.rehydrated});case 32:case"end":return e.stop()}}),e,this,[[10,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeEvents",value:function(e){var t=this;e.on("session_update",function(){var e=(0,i.Z)(f().mark((function e(n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&t.emit(Rt.n2.ERRORED,n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"getWalletConnectInstance",value:function(){var e=this.adapterOptions.adapterSettings||{};return e.bridge=e.bridge||"https://bridge.walletconnect.org",new Ct(e)}}]),n}(Mt.d)},75520:function(e){e.exports=r,r.strict=i,r.loose=s;var t=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function r(e){return i(e)||s(e)}function i(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function s(e){return n[t.call(e)]}},4245:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,s=n(319).default,o=n(40499),a=n(59412),c=n(70845);function u(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function h(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function d(e,t){return t.decode?a(e):e}function p(e){return Array.isArray(e)?e.sort():"object"===typeof e?p(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function f(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function l(e){var t=(e=f(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function v(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){u((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var i="string"===typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((function(t){return d(t,e)})):null===n?n:d(n,e);r[t]=i};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),s=Object.create(null);if("string"!==typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;var o,a=i(e.split("&"));try{for(a.s();!(o=a.n()).done;){var h=o.value,f=c(t.decode?h.replace(/\+/g," "):h,"="),l=r(f,2),g=l[0],y=l[1];y=void 0===y?null:["comma","separator"].includes(t.arrayFormat)?y:d(y,t),n(d(g,t),y,s)}}catch(I){a.e(I)}finally{a.f()}for(var w=0,k=Object.keys(s);w<k.length;w++){var m=k[w],_=s[m];if("object"===typeof _&&null!==_)for(var b=0,S=Object.keys(_);b<S.length;b++){var x=S[b];_[x]=v(_[x],t)}else s[m]=v(_,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce((function(e,t){var n=s[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=p(n):e[t]=n,e}),Object.create(null))}t.extract=l,t.parse=g,t.stringify=function(e,t){if(!e)return"";u((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&(null===(r=e[n])||void 0===r)||t.skipEmptyString&&""===e[n];var r},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(s(n),null===r?[[h(t,e),"[",i,"]"].join("")]:[[h(t,e),"[",h(i,e),"]=",h(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(s(n),null===r?[[h(t,e),"[]"].join("")]:[[h(t,e),"[]=",h(r,e)].join("")])}};case"comma":case"separator":return function(t){return function(n,r){return null===r||void 0===r||0===r.length?n:0===n.length?[[h(t,e),"=",h(r,e)].join("")]:[[n,h(r,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(s(n),null===r?[h(t,e)]:[[h(t,e),"=",h(r,e)].join("")])}}}}(t),i={},o=0,a=Object.keys(e);o<a.length;o++){var c=a[o];n(c)||(i[c]=e[c])}var d=Object.keys(i);return!1!==t.sort&&d.sort(t.sort),d.map((function(n){var i=e[n];return void 0===i?"":null===i?h(n,t):Array.isArray(i)?i.reduce(r(n),[]).join("&"):h(n,t)+"="+h(i,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=c(e,"#"),i=r(n,2),s=i[0],o=i[1];return Object.assign({url:s.split("?")[0]||"",query:g(l(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:d(o,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign({encode:!0,strict:!0},n);var r=f(e.url).split("?")[0]||"",i=t.extract(e.url),s=t.parse(i,{sort:!1}),o=Object.assign(s,e.query),a=t.stringify(o,n);a&&(a="?".concat(a));var c=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(c="#".concat(h(e.fragmentIdentifier,n))),"".concat(r).concat(a).concat(c)}},70845:function(e){"use strict";e.exports=function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},40499:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},16758:function(e,t,n){var r=n(19778).Buffer,i=n(75520).strict;e.exports=function(e){if(i(e)){var t=r.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return r.from(e)}}}]);
//# sourceMappingURL=968.9a6a0585.chunk.js.map